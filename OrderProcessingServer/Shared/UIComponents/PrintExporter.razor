@using Microsoft.JSInterop
@using System.Text
@inject IJSRuntime JS

@namespace OrderProcessingServer.Shared.UIComponents

<div @ref="containerRef">
  @if (!string.IsNullOrWhiteSpace(Title))
  {
    <div class="mb-3"><h3>@Title</h3></div>
  }
  @ChildContent
</div>

@code {
  [Parameter] public RenderFragment? ChildContent { get; set; }
  [Parameter] public string? Title { get; set; }
  [Parameter] public bool IncludeBootstrap { get; set; } = true;

  ElementReference containerRef;

  // Print the component's content using the client's print window
  public async Task PrintAsync()
  {
    if (JS is null) throw new InvalidOperationException("IJSRuntime is not available");
    await JS.InvokeVoidAsync("openPrintWindowFromElement", containerRef, IncludeBootstrap);
  }
}
