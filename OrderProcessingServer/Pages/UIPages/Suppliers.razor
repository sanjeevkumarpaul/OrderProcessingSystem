@page "/suppliers"
@using OrderProcessingServer.Shared.Dto
@using OrderProcessingSystem.Utilities.Extensions
@inherits BaseDataPage<SupplierDto>
<link rel="stylesheet" href="~/css/suppliers.css" />

<BaseDataPage TItem="SupplierDto" 
              PageTitle="Suppliers"
              EntityName="suppliers"
              ShowCardsText="Show Cards"
              ShowGridText="All Suppliers"
              GridPageSize="10"
              CardPageSize="12"
              CardColumnClass="col-12 col-sm-6 col-md-4 col-xl-3 mb-3"
              DataLoader="@LoadSuppliersAsync">
    <CardTemplate Context="supplier">
        <div class="card p-3" style="max-width:100%; word-break:break-word;">
            <h5 class="text-truncate">@supplier.Name</h5>
            <p class="small text-muted">Country: @supplier.Country</p>
            <p class="small">Orders Supplied: <strong>@supplier.OrdersSupplied</strong></p>
        </div>
    </CardTemplate>
</BaseDataPage>

@code {
    // Data loader function for suppliers
    private async Task<List<SupplierDto>?> LoadSuppliersAsync()
    {
        return await DataLoadingService.LoadSuppliersWithCalculationsAsync();
    }
}
